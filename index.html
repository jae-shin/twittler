<!DOCTYPE html>
<html>
  <head>
    <script src="jquery.js"></script>
    <script src="data_generator.js"></script>
    <title>Twittler</title>
    <link rel="stylesheet" href="styles.css">
  </head>
  <body>
    <header class='container'>
      <h1>Welcome to Twittler!</h1>
    </header>

    <section class='container group'>
    
      <button name='home' class='home'>Home</button>
      <button name='newTweets' class='newTweets'>See New Tweets</button>
      
    </section>

    <section class='container'>
      <div class='feedTitle'>Here are the tweets from your friends...</div>
      <div class='userTitle'></div>
    </section>

    <section class='feed'>
    </section>

    <script>

      $(document).ready(function(){
        
        var index = 0;

        // Shows new tweets under Feed
        var refreshTweets = function(){
          var length = streams.home.length;
          while(index < length){
            var tweet = streams.home[index];
            var $tweet = $('<div></div>');
            $tweet.addClass('container tweets');
            $tweet.addClass(tweet.user);
            $tweet.html('<span>@' + tweet.user + '</span>' + ': ' + tweet.message + '   ' + tweet.created_at);

            $tweet.children('span').addClass('userName');

            $('.feed').prepend($tweet);
            index++;
          }
        }

        // Show the pre-generated 11 tweets
        refreshTweets(); 

        // wrap commands to return to the home page with full feed
        var returnHome = function() {
          $('.feed div').show();
          $('.feedTitle').show();
          $('.userTitle').hide();
        }

        // When the 'See New Tweets' button is clicked, show new tweets
        $('button.newTweets').on('click', function() {
          returnHome();
          refreshTweets();
        });

        // When the 'Home' button is clicked, return to the home page
        $('button.home').on('click', returnHome);

        // filter feed when user name is clicked
        $('.feed').on('click', '.userName', function() {
          var userString = $(this).text().slice(1);
          // var tweetsOfUser = streams.users[userString];
          $('.feedTitle').hide();
          $('.userTitle').show().text('Here is the Twittler timeline of @' + userString);
          var userClass = '.' + userString;
          $('.feed div').hide();
          $('.feed').find(userClass).show();
          
        });
      });

    </script>



  </body>
</html>
